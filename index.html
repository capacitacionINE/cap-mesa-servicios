<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Introducci√≥n R para Mesa de Servicios</title>
    <meta charset="utf-8" />
    <meta name="author" content="PE SSCC - Fase 5" />
    <meta name="date" content="2021-01-07" />
    <link rel="stylesheet" href="xaringan-themer.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">


class: center, middle

.linea-superior[]
.linea-inferior[]


&lt;img src="imagenes/logo_portada2.png" width="200" /&gt;


## Introducci√≥n a R

## Proyecto Estrat√©gico Servicios Compartidos para la Producci√≥n Estad√≠stica

### Enero 2021

Ignacio Agloni y Klaus Lehmann






---
background-image: url("imagenes/fondo2.PNG")
background-size: contain;
background-position: 100% 0%

# Objetivos de la presentaci√≥n

&lt;br&gt;
&lt;br&gt;

--

.center[
## Ofrecer contexto sobre la relevancia que ha cobrado `R` en la instituci√≥n
]

&lt;br/&gt;

--

.center[
## Mostrar las principales funcionalidades de `R`
]

&lt;br/&gt;

--

.center[

## Entregar algunas herramientas pr√°cticas para la resoluci√≥n de requerimientos e instalaci√≥n de algunos componentes
]

&lt;br/&gt;

---

background-image: url("imagenes/fondo2.PNG")
background-size: contain;
background-position: 100% 0%

# Contenidos de la presentaci√≥n

--
&lt;br/&gt;

- Presentaci√≥n general del .pur[Proyecto Estrat√©gico Servicios Compartidos para la Producci√≥n Estad√≠stica]

--

- Descripci√≥n general del lenguaje

--

- Presentaci√≥n del IDE

--

- Principales requerimientos del negocio

--

- Manejo de paquetes

--

- Miktex - Tinytex - Rtools

--

- Interacci√≥n con bases de datos

--

- Aplicaciones en html

--

- Interacci√≥n con otros lenguajes (python, SQL)

---
background-image: url("imagenes/fondo2.PNG")
background-size: contain;
background-position: 100% 0%

# PE Servicios Compartidos

--

&lt;br/&gt;
&lt;br/&gt;

.center[.medium-par[**Objetivo del proyecto**:]]

.center[.medium-par[Proveer a la instituci√≥n de est√°ndares y desarrollos que permitan .medium-par-red[automatizar], .medium-par-red[estandarizar], .medium-par-red[ordenar] e .medium-par-red[innovar] en la producci√≥n estad√≠stica, permitiendo reducir .medium-par-red[tiempos] y .medium-par-red[costos] del procesamiento y an√°lisis de las diferentes operaciones estad√≠sticas del INE y minimizando la probabilidad de .medium-par-red[errores] en la publicaci√≥n de resultados.]]

---
background-image: url("imagenes/fondo2.PNG")
background-size: contain;
background-position: 100% 0%

# PE SSCC - Estructura del proyecto

--
.center[
&lt;img src="imagenes/sscc_estructura.PNG" width="700" /&gt;
]

---
background-image: url("imagenes/fondo2.PNG")
background-size: contain;
background-position: 100% 0%

# PE SSCC - Planificaci√≥n 2020-2021

--
&lt;br/&gt;
&lt;br/&gt;

.center[
&lt;img src="imagenes/sscc_planificacion.PNG" width="800" /&gt;
]

---
background-image: url("imagenes/fondo2.PNG")
background-size: contain;
background-position: 100% 0%

# R, Autimatizaci√≥n y Ciencia de datos

--
&lt;br/&gt;
&lt;br/&gt;

.center[
.medium-par[¬øAlguna/o de ustedes tiene experiencia con `R`?]
]

&lt;br/&gt;

--

.center[
.medium-par[¬øManejan o conocen alg√∫n .pur[lenguaje de programaci√≥n]?]
]

&lt;br/&gt;

--

.center[
.medium-par[¬øDonde creen que debiera fijarse el .pur[l√≠mite] entre el rol del .pur[negocio] y la .pur[Mesa de servicios] en cuanto a la administraci√≥n de R?]
]

--

.center[
.big-par[ü§î]
]

---
background-image: url("imagenes/fondo2.PNG")
background-size: contain;
background-position: 100% 0%

# Panorama institucional

Durante los √∫ltimos a√±os, las herramientas m√°s comunmente utilizadas en la SDT han sido STATA y SAS.

.pull-left[
&lt;img src="imagenes/logo_stata.png" width="200" /&gt;

]

.pull-right[
&lt;img src="imagenes/logo_sas.png" width="200" /&gt;

]


--

Existe un impulso para que los procesamientos migren a `R`.

--

La competencia natural de `R` dentro de la instituci√≥n es .pur[STATA].

--

- Ambos permiten llevar a cabo el procesamiento estad√≠stico.

- Stata es muy popular entre de los economistas.

--

Pero...

--

- R es .pur[gratuito].

- Permite abordar una .pur[variedad de tareas] mucho m√°s amplia que STATA.

---

background-image: url("imagenes/fondo2.PNG")
background-size: contain;
background-position: 100% 0%

# Panorama institucional


### Python podr√≠a ser una buena alternativa 

.center[
&lt;img src="imagenes/logo_python.png" width="200" /&gt;
]


Tambi√©n es gratuito.


--

Es un lenguaje .pur[multiparadigma] que podr√≠a ser .pur[compartido por SDT y SDTI].

--

Pero su uso es a√∫n muy incipiente en la SDT.  


---
background-image: url("imagenes/fondo2.PNG")
background-size: contain;
background-position: 100% 0%

# Descripci√≥n del lenguaje

`R` es un lenguaje de **libre distribuci√≥n** y de **c√≥digo abierto**, disponible para **Linux**, **Windows** y **MacOS**

.center[
&lt;img src="imagenes/logos_sistemas.PNG" width="350" /&gt;

]

--

Tanto R como RStudio (IDE) son gratuitos.

--

.pull-left[
&lt;img src="imagenes/r_logo.PNG" width="120" /&gt;
]

.pull-right[
&lt;img src="imagenes/rstudio_logo.PNG" width="250" /&gt;

]

--

La primera versi√≥n de `R` fue liberada en 1993 y constantemente aparecen actualizaciones (**versi√≥n actual 4.0.3**). 

--

`R` es un .pur[lenguaje interpretado] de .pur[alto nivel], que utiliza por detr√°s c√≥digo de C, C++ y Fortran.

---
background-image: url("imagenes/fondo2.PNG")
background-size: contain;
background-position: 100% 0%

# Descripci√≥n del lenguaje

--

`R` fue dise√±ado por estad√≠sticos y para estad√≠sticos.

--

Con el tiempo su uso se ha ido extendiendo a otras √°reas: medicina, ciencia pol√≠tica, ingenier√≠a, ciencias sociales, ecolog√≠a, entre otros.

--

.center[
&lt;img src="imagenes/avance_r.PNG" width="450" /&gt;

]


---

background-image: url("imagenes/fondo2.PNG")
background-size: contain;
background-position: 100% 0%

# Descripci√≥n del lenguaje

--

Actualmente, es un lenguaje muy popular en el mundo acad√©mico y est√° tomando fuerza en el sector p√∫blico. 


.center[
&lt;img src="imagenes/industrias.png" width="430" /&gt;

]


--

### Compite con Python en el campo de la ciencia de datos.

---

background-image: url("imagenes/fondo2.PNG")
background-size: contain;
background-position: 100% 0%

# ¬øPor qu√© transitar a R en la SDT?

--

Es muy √∫til en dos campos

- Automatizaci√≥n del procesamiento estad√≠stico

- Tareas relacionadas con ciencia de datos

--

**Procesamiento**

- IDE muy eficiente y f√°cil de usar

--

- Integraci√≥n sencilla con git

--

- Soluciones para tareas muy espec√≠ficas (desarrollo de paquetes)

--

- Integraci√≥n sencilla con otros lenguajes (python y SQL) 

--

- Automatizaci√≥n de reportes

--

- Manejo sencillo de distintos formatos de archivo (dta, sav, xlsx, csv, tab)

--

- Paralelizaci√≥n de procesos costosos


---

background-image: url("imagenes/fondo2.PNG")
background-size: contain;
background-position: 100% 0%

# ¬øPor qu√© transitar a R en la SDT?

**Ciencia de datos**

- Procesamiento de texto e im√°genes

--

- Machine learning 

--

- Incoporaci√≥n r√°pida de avances estad√≠sticos

--

- Muy buena visualizaci√≥n 

--

**Tambi√©n existen algunas desventajas**

- Requiere analistas con mayores habilidades de programaci√≥n 

--

- Requiere establecer ciertos est√°ndares

--

- No cuenta con las mejores librer√≠as para *deep learning*

--

- No es un lenguaje multiprop√≥sito, como python o java.  

---
background-image: url("imagenes/fondo2.PNG")
background-size: contain;
background-position: 100% 0%

# RStudio

--

R puede funcionar con distintos IDEs (Eclipse, Visual Studio, R-Brain).

--

El m√°s popular es `RStudio`

--

.center[
&lt;img src="imagenes/interfaz_rstudio.PNG" width="700" /&gt;

]

---
background-image: url("imagenes/fondo2.PNG")
background-size: contain;
background-position: 100% 0%

# Principales requerimientos del negocio

Compilamos algunos de los requerimientos que llegan a la Mesa de Servicios:

--

*Estimados/as, Junto con saludar, solicito me puedan instalar la **√∫ltima actualizaci√≥n del software R**, puesto que intente descargar un paquete y no me dejo debido a que la versi√≥n que tengo no es la m√°s actualizada.*

--

*Solicito de vuestra ayuda para actualizar software R y RStudio, adem√°s de **dejar habilitada la opci√≥n en mi equipo de que este software pueda descargar librer√≠as y actualizaciones***

--

*El requerimiento se hace principalmente para actualizar el software R en sus √∫ltimas versiones:R 4.0.3 RStudio Desktop 1.3.1093 **Rtools 4.0 Miktex 20.10**. Finalmente tengo un requerimiento adicional, el software Miktex que brinda librer√≠as adicionales en R no puede descargar librer√≠as de sus servidores, al parecer la red INE no admite la descarga, ¬øes posible permitir a este programa bajar librer√≠as?*

--

*Hola! Necesito **permisos para ejecutar el software RStudio como administrador**, para poder instalar algunos paquetes que debo usar.*

---
background-image: url("imagenes/fondo2.PNG")
background-size: contain;
background-position: 100% 0%

# Principales requerimientos del negocio

--

*Estimados:Junto con saludar, como ustedes saben, en la instituci√≥n habemos muchos funcionarios que ocupamos el software R. Desde hace unas semanas (meses) me percat√© que desde mi equipo **no es posible conectarse a los repositorios CRAN** (ninguno, ni siquiera el repositorio alojado en la Univ de Chile) para actualizar/instalar paquetes en R. Probablemente, se modificaron las restricciones (...)* 

--

*(...) Varias unidades estamos a cargo de indicadores CDC que implican el uso de R para automatizar boletines regionales, por lo que es imprescindible tener actualizados los paquetes de R y de las **distribuciones de LATEX**. En este √∫ltimo caso, en Biobio Ocupamos **Tinitex** desde RStudio, y ocurre algo similar, no es posible conectarse a los repositorios CRAN. Adicionalmente, cuando tuve que ocupar Python a trav√©s de la IDE Anaconda, tampoco permitia conetctar a los repositorios. **El problema no ha reventado , dado que muchos se encuentran haciendo trabajo remoto desde sus computadores personales**, pero cuando se vuelva a usar en forma intensiva los equipos de oficina, se va a necesitar actualizar e instalar los paquetes que estamos ocupando , para que los c√≥digos puedan ejecutarse.*

---
background-image: url("imagenes/fondo2.PNG")
background-size: contain;
background-position: 100% 0%

# Principales requerimientos del negocio

--

&lt;br/&gt;

.center[.medium-par[La mayor√≠a de estos problemas podr√≠an ser solucionados por los usuarios]]

--

&lt;br/&gt;

.center[.medium-par[El obst√°culo radica en los permisos de administraci√≥n]]

--

&lt;br/&gt;

.center[.medium-par[Revisaremos c√≥mo dar soluci√≥n a estos requerimientos]]

--

&lt;br/&gt;

.center[.big-par[ü§ì]]


---
background-image: url("imagenes/fondo2.PNG")
background-size: contain;
background-position: 100% 0%

# Paquetes (librer√≠as) en R 

--
&lt;br/&gt;

La comunidad de R colabora activamente en el desarrollo de paquetes.

--

**CRAN** (*Comprehensive R Archive Network*) es el repositorio donde se almacenan los paquetes "oficiales".

--

Actualmente en CRAN hay .pur[m√°s de 10.000 paquetes disponibles].

--

Entrar a CRAN requiere cumplir con ciertos est√°ndares de calidad.

---
background-image: url("imagenes/fondo2.PNG")
background-size: contain;
background-position: 100% 0%

# Paquetes (librer√≠as) en R

--

Muchos usuarios suben sus paquetes a github o gitlab.

.center[
&lt;img src="imagenes/logos_github_gitlab.PNG" width="250" /&gt;

]

--

Esta es una manera r√°pida y f√°cil de compartir un desarrollo.

--

Muchos paquetes de gran utilidad no est√°n en CRAN.

--

**Ac√° tenemos un problema para el que .medium-par-red[a√∫n] no tenemos soluci√≥n**.

--

No es posible descargar paquetes de .pur[github] debido a un bloqueo institucional.

--

Est√°n bloqueados todos los sitios con denominaci√≥n "nube de almacenamiento".

--

.pull-left[
Esto impide, por ejemplo, descargar un [paquete](https://github.com/michael-cw/SurveySolutionsAPI) que el Banco Mundial ofrece para interactuar con la API de Survey Solutions.  
]

.pull-right[
&lt;img src="imagenes/logo_survey_solutions.PNG" width="200" /&gt;

]

---

background-image: url("imagenes/fondo2.PNG")
background-size: contain;
background-position: 100% 0%

# Plataformas git en procesamiento 

--
&lt;br/&gt;

En el marco del PE SSCC se est√° estudiando la .pur[implementaci√≥n de plataformas git para el procesamiento y an√°lisis de datos].

--

Esta es una iniciativa incipiente, por lo que se est√° evaluando a trav√©s de .pur[experiencias de uso].

--

La primera experiencia a evaluar es el uso de .pur[Gitlab] en la .pur[prueba piloto de la IX EPF].

--

El .pur[desaf√≠o] es imprimir estas .pur[herramientas] y .pur[flujos de trabajo colaborativo] en equipos .pur[no inform√°ticos].

--

.center[.medium-par[`R` facilita la vinculaci√≥n con plataformas git a trav√©s de su interfaz gr√°fica.]]
---

background-image: url("imagenes/fondo2.PNG")
background-size: contain;
background-position: 100% 0%

# Instalaci√≥n de paquetes 

--

Paquetes que est√°n en CRAN.


```r
install.packages("tidyverse")
```

--


```r
library(tidyverse)
```

--

üëÄ: para esto .medium-par[**NO**] se requieren permisos de administrador.

--

Paquetes fuera de CRAN.


```r
library(devtools)
install_github("Klauslehmann/calidad")
```

[Ejemplo paquete en github](https://github.com/Klauslehmann/calidad)

--

üëÄ: esto .medium-par[**NO**] se puede a√∫n teniendo permisos de administrador.

---

background-image: url("imagenes/fondo2.PNG")
background-size: contain;
background-position: 100% 0%

# Instalaci√≥n de paquetes 

--

Instalaci√≥n de versiones anteriores de un paquete.


```r
devtools::install_version("ggplot2", version = "0.9.1", repos = "http://cran.us.r-project.org")
```

--

Para instalar paquetes precompilados.


```r
install.binaries("ggplot2")
```

---

background-image: url("imagenes/fondo2.PNG")
background-size: contain;
background-position: 100% 0%

# Miktex - Tinytex - Rtools

## Rtools:

--


Es un programa de librer√≠as que complementa R. Se descarga e instala de forma independiente. **NO ES UN PAQUETE DE R**.

--

Muchas librer√≠as importantes como `devtools` o `tidyverse` requieren tener una versi√≥n de Rtools compatible para funcionar.

--

[Aqu√≠](https://rpubs.com/Earlien/guide-to-installing-R) les dejamos una gu√≠a de instalaci√≥n que incluye complementos como Rtools.

--

&lt;br/&gt;

.center[.medium-par[Recomendamos instalar Rtools junto con R y RStudio cuando sea solicitado por alg√∫n usuario.]]

--

Usuarios Windows tarde o temprano necesitaran **Rtools** si no lo tienen.

---

background-image: url("imagenes/fondo2.PNG")
background-size: contain;
background-position: 100% 0%

# Miktex - Tinytex - Rtools

## Miktex

Es una versi√≥n completa de **Latex** para Windows, bastante pesada y de dif√≠cil instalaci√≥n.

--

**TAMPOCO ES UN PAQUETE DE R**, sino un programa externo requerido para correr **Latex* en Windows.

--

.center[.medium-par[¬øPara qu√© se necesita usar **latex** desde R?ü§î]]

--

.center[Para generar **informes en PDF**, como los .pur[boletines autom√°ticos]]

---

background-image: url("imagenes/fondo2.PNG")
background-size: contain;
background-position: 100% 0%

# Miktex - Tinytex - Rtools

## Tinytex

Es una versi√≥n de **Latex** ligera que ha hecho *Yihui Xie* para ser usada desde R.

--

Requiere tener instalado **Rtools**.

--

Este se puede instalar directamente desde RStudio.


```r
# instalacion de TinyTeX
    install.packages('tinytex')
    tinytex::install_tinytex()
```

--

&lt;br/&gt;

.center[.medium-par[**Tinytex** permite prescindir de **Miktex** por lo que recomendamos la instalaci√≥n del primero si solo se va a utilizar **Latex** desde `R`.]]

---

background-image: url("imagenes/fondo2.PNG")
background-size: contain;
background-position: 100% 0%

# R para bases de datos 

--

Existen varios paquetes para trabajar con bases de datos.

--

- `DBI`

- `RODBC`

- `dbConnect`

- `RSQLite`

- `RMySQL`

- `RPostgreSQL`

--

Para hacer la conexi√≥n, la opci√≥n m√°s sencilla es autenticar mediante la cuenta institucional.

--


```r
con &lt;- odbcDriverConnect('driver={SQL Server};server=BUVMSQLWINP01\\EXPLOT;database=ENE_ZERO;trusted_connection=true&lt;encoding = latin1')
```


---
background-image: url("imagenes/fondo2.PNG")
background-size: contain;
background-position: 100% 0%

# R para bases de datos

--

Establecer la conexi√≥n desde una m√°quina Linux no permite autenticar con las credenciales institucionales.

--

Se genera un problema cuando queremos trabajar desde el RServer (CentOS).

--

En estos casos, accedemos mediante un usuario creado en la base de datos.


```r
library(RODBC)
con &lt;- odbcDriverConnect('driver=ODBC Driver 11 for SQL Server;server=buvmsqlwinp04\\RRAA,58550;database=SUPERINTENDENCIA_2; uid=****; pwd=*******')
```

--

Podemos consultar la base de datos usando directamente c√≥digo de SQL.



```r
query = sqlQuery(con, 'SELECT TOP 10 * FROM SUPERINTENDENCIA_2.dbo.COTIZACIONES_TRAB_A02') 
```

---

background-image: url("imagenes/fondo2.PNG")
background-size: contain;
background-position: 100% 0%

# R para bases de datos 

Tambi√©n es posible hacer consultas con c√≥digo de `R`, mediante `dbplyr`.

--


```r
library(dbplyr)
con &lt;- DBI::dbConnect(RSQLite::SQLite(), "driver=ODBC Driver 11 for SQL Server;server=buvmsqlwinp04\\RRAA,58550;database=SUPERINTENDENCIA_2; uid=****; pwd=*******")

copy_to(con, query, "query2")
query2 &lt;- tbl(con, "query2")

*media &lt;- query2 %&gt;%
* group_by(anio) %&gt;%
* summarise(media = mean(ID_trabajor, na.rm = TRUE)) %&gt;%
* select(media)

media %&gt;% 
  collect()
```

--

El paquete `dbplyr` traduce la sintaxis de `dplyr` a SQL.

--

.pull-left[

### ¬øQu√© es dplyr?


]


.pull-right[
&lt;img src="https://media.giphy.com/media/3o7buirYcmV5nSwIRW/giphy.gif" width="200" /&gt;
]


---
background-image: url("imagenes/fondo2.PNG")
background-size: contain;
background-position: 100% 0

# Un poco sobre dplyr y tidyverse

--

Durante los √∫ltimos a√±os ha surgido un proyecto llamado **tidyverse**.

--

Es un conjunto de paquetes que comparten **una filosof√≠a, una sintaxis y una manera de hacer las cosas**.


.center[
&lt;img src="imagenes/paquetes.PNG" width="600" /&gt;
]

---
background-image: url("imagenes/fondo2.PNG")
background-size: contain;
background-position: 100% 0

# Un poco sobre dplyr y tidyverse

--

Aunque no existe una √∫nica forma de hacer las cosas, es √∫til llegar a consensos, en aras de mejorar la comunicaci√≥n.

--

`tidyverse` nos provee de una gran cantidad de herramientas para tener un lenguaje com√∫n.

--

Desde Servicios Compartidos estamos promoviendo el uso de tidyverse para el procesamiento estad√≠stico.   


--

El paquete `dplyr` es el coraz√≥n de `tidyverse` y la principal herramienta para la manipulaci√≥n de datos.


.pull-left[
&lt;img src="imagenes/alicate2.PNG" width="230" /&gt;
]

.pull-right[
### dplyr es nuestro caballito de batalla en las capacitaciones

.red[üëÅÔ∏è tidyverse y por tanto dplyr requieren tener instalado rtools]
]


---
background-image: url("imagenes/fondo2.PNG")
background-size: contain;
background-position: 100% 0%

# R y webscraping

Las fuentes de informaci√≥n para las estad√≠sticas oficiales se est√°n diversificando

--

La informaci√≥n web se torna cada vez m√°s relevante

--

R nos permite trabajar con datos web mediante algunos paquetes

- rvest

- RSelenium

- httr

--

RSelenium es una gran herramienta para interactuar con los navegadores

---

background-image: url("imagenes/fondo2.PNG")
background-size: contain;
background-position: 100% 0%

# R y webscraping


```r
library(RSelenium); library(wdman);library(tidyverse)
version &lt;- binman::list_versions("chromedriver")

rD1 &lt;- rsDriver(browser = "chrome", port = 4567L, geckover = NULL, #4567
                chromever = version[[1]][2], iedrver = NULL, phantomver = NULL)
remDr &lt;- rD1[["client"]]

remDr$navigate("https://www.jumbo.cl")
remDr$maxWindowSize(winHand = "current")

webelem_cat_super &lt;- remDr$findElements(using = 'css selector', ".new-header-supermarket-button")
remDr$mouseMoveToLocation(webElement = webelem_cat_super[[1]])

webelem_nodo_generico &lt;- remDr$findElements(using = 'css selector', ".new-header-supermarket-dropdown-item-name")
remDr$mouseMoveToLocation(webElement = webelem_nodo_generico[[2]])

webelem_nodo_generico[[2]]$click()

precios &lt;- remDr$findElements(using = "css selector", ".product-single-price-container")
map_chr(precios,   ~.x$getElementText()[[1]]) 
```



---
background-image: url("imagenes/fondo2.PNG")
background-size: contain;
background-position: 100% 0%

# R y html

--

Existen m√∫ltiples herramientas para generar archivos html.

--

Esta presentaci√≥n es un archivo html generado con un paquete llamado `rmarkdown`.

--


```html
&lt;script&gt;
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i &lt; codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' &amp;&amp; code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove &lt;code&gt;&lt;/code&gt;
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
&lt;/script&gt;

```

---
background-image: url("imagenes/fondo2.PNG")
background-size: contain;
background-position: 100% 0%

# rmarkdown 

--
&lt;br/&gt;

Es un paquete que est√° siendo utilizado de manera intensiva en la SDT para generar reportes 

--

Permite generar archivos html y pdf

--

La modalidad pdf soporta c√≥digo de latex.

--

Dado que `rmarkdown` permite incluir texto plano y c√≥digo en R, es ideal para incorporar sistemas autom√°ticos de reporter√≠a.

--

[Documento de trabajo](https://www.ine.cl/docs/default-source/documentos-de-trabajo/c%C3%A1lculo-de-medidas-de-precisi%C3%B3n-para-medianas-de-ingreso-y-gasto-de-la-v.pdf?sfvrsn=e5b6a7b3_2) en pdf generado con `rmarkdown`.

--

Para la generaci√≥n de reportes autom√°ticos que se han multiplicado ultimamente se est√° utilizando `rmarkdown` en combinaci√≥n con un paquete llamado `Sweave`.

--

Se han automatizado en el INE con estas herramientas el **EMAT**, **ISUP**, **IPP**, entre otros, y se est√° trabajando en la automatizaci√≥n de los boletines de la **ENE**.

--

Se ha generado un ahorro importante de tiempo de trabajo manual.

---
background-image: url("imagenes/fondo2.PNG")
background-size: contain;
background-position: 100% 0%

# R y html 

bookdown es otro paquete para generar archivos html

--

El objetivo es generar un libro en formato digital

--

[R for data science](https://r4ds.had.co.nz/) 

--

El manual de trabajo de campo de la prueba piloto EPF fue generado mediante bookdown


---
background-image: url("imagenes/fondo2.PNG")
background-size: contain;
background-position: 100% 0%

# R y shiny 

--

`shiny` permite crear aplicaciones web mediante c√≥digo de R

--

El paquete permite generar un archivo html que contiene javascript y css. 

--

Se estructura a partir de 2 funciones principales:

- ui: interfaz de usuario 

- server: procesa los datos 


[Ejemplo EPF](https://klaus-lehmann.shinyapps.io/epf-app/?_ga=2.227155677.1937938277.1605228598-1258237829.1596836306)

---

background-image: url("imagenes/fondo2.PNG")
background-size: contain;
background-position: 100% 0%


# Visualizaciones con R 

--

Es posible generar visualizaciones animadas

--

&lt;img src="cap-mesa-servicios_files/figure-html/unnamed-chunk-13-1.gif" style="display: block; margin: auto;" /&gt;

---

background-image: url("imagenes/fondo2.PNG")
background-size: contain;
background-position: 100% 0%

# Visualizaciones con R 

--

Podemos usar de manera sencilla c√≥digo de javascript para generar visualizaciones m√°s atractivas 

[Ejemplo EPF](https://klauslehmann.netlify.app/2019/07/07/en-qu%C3%A9-gastan-los-hogares-chilenos/) 

--

`R` est√° acercando herramientas de visualizaci√≥n a los analistas t√©cnicos, permiti√©ndoles .pur[desarrollar sus propias visualizaciones sin necesidad de edici√≥n para llegar al usuario final].

--

Actualmente existe una **mesa de trabajo entre SDT y SDTI (difusi√≥n)** para lograr embeber/implementar visualizaciones en la web institucional.

---

background-image: url("imagenes/fondo2.PNG")
background-size: contain;
background-position: 100% 0%

# Integraci√≥n con otros lenguajes

Ya hemos visto que podemos usar c√≥digo de SQL sin mayores problemas

--

Mediante el paquete `reticulate` es posible cargar el int√©rprete de python y generar flujos de trabajo integrados de python y R


.center[&lt;img src="imagenes/logo_reticulate.jpg" width="230" /&gt;]

--

En Servicios Compartidos estamos incorporando un flujo de procesamiento que contiene c√≥digo de python y R

---

background-image: url("imagenes/fondo2.PNG")
background-size: contain;
background-position: 100% 0%

# Integraci√≥n con otros lenguajes

El paquete `Rcpp` permite usar c√≥digo de C++


```r
library(Rcpp)
cppFunction('int add(int x, int y, int z) {
  int sum = x + y + z;
  return sum;
}')

add(1, 2, 3)
```



--

Podemos usar C++, para crear funciones de R m√°s eficientes 

--

√öltima alternativa cuando las funciones existentes no son suficientemente veloces

---

background-image: url("imagenes/fondo2.PNG")
background-size: contain;
background-position: 100% 0%


# Revisando el hardware

--

R Tambi√©n permite conocer los recursos disponibles en la m√°quina mediante funciones.

--

Para mirar el n√∫mero de CPUs.


```r
library(parallel)
detectCores()
```

```
## [1] 4
```

--

Para mirar la versi√≥n de R


```r
version
```

```
##                _                           
## platform       x86_64-w64-mingw32          
## arch           x86_64                      
## os             mingw32                     
## system         x86_64, mingw32             
## status                                     
## major          4                           
## minor          0.2                         
## year           2020                        
## month          06                          
## day            22                          
## svn rev        78730                       
## language       R                           
## version.string R version 4.0.2 (2020-06-22)
## nickname       Taking Off Again
```

---

background-image: url("imagenes/fondo2.PNG")
background-size: contain;
background-position: 100% 0%

# Para finalizar

--

Como pueden ver, el potencial de `R` es amplio, y es muy probable que profundice su uso en nuevas tareas.

--

.center[.medium-par[Por eso es muy importante la coordinaci√≥n entre el **negocio** y el **soporte**]‚öôÔ∏è]

--

.center[.medium-par[Como proyecto Servicios Compartidos estamos disponibles para atender sus consultas.]]

--

Ya tienen nuestros correos: 

    - ignacio.agloni@ine.cl
    - klaus.lehmannm@ine.cl

--

.center[.medium-par[Muchas gracias!!üòé]]

---

class: center, middle

.linea-superior[]
.linea-inferior[]
&lt;img src="imagenes/logo_portada2.png" width="200" /&gt;


## Introducci√≥n a R

## Proyecto Estrat√©gico Servicios Compartidos para la Producci√≥n Estad√≠stica

### Enero 2021
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
